# 주차 요금 계산

https://school.programmers.co.kr/learn/courses/30/lessons/92341

객체, 배열을 활용한 구현 문제

```js
function solution(fees, records) {
    const carLog = {}
    
    records.forEach(row => {
        const [time, carNum, inOut] = row.split(" ")
        
        if (carLog[carNum]) {
            carLog[carNum].push(time)
        } else {
            carLog[carNum] = [time]
        }
    })
    
    // carLog[carNum] 의 배열의 길이가 홀수이면 출차하지 않았음
    // 마지막 23시 59분 출차로 계산
    
    return Object.keys(carLog).sort().map(item => {
        return calFee(fees, calTotalMin(carLog[item]))
    })
}

function calTotalMin(logs) {
    const times = logs
    if (logs.length % 2 === 1) {
        times.push('23:59')
    }

    return times.reduce((total, currentTime, idx) => {
        const [hr, mn] = currentTime.split(":")
    
        const cur = +hr * 60 + +mn
        
        if (idx % 2 === 1) {
            return total += cur
        } else {
            return total -= cur
        }
    }, 0)
}

function calFee(fees, totalMin) {
    const basic_minutes = fees[0];
    const basic_fee = fees[1];
    const unit = fees[2]
    const fee_per_unit = fees[3];
    
    if (totalMin <= basic_minutes) return basic_fee;
    else {
        return basic_fee + Math.ceil((totalMin - basic_minutes) / unit) * fee_per_unit;
    }
}
```