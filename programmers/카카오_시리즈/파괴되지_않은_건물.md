# 파괴되지 않은 건물

https://school.programmers.co.kr/learn/courses/30/lessons/92344

- 누적합

## 1차

- 정확성 통과 / 효율성 실패

```js
function solution(board, skills) {
    skills.forEach(skill => {
        const [type, r1, c1, r2, c2, degree] = skill
        const isAttack = type === 1
        
        for (let r = r1; r <= r2; r++) {
            for (let c = c1; c <= c2; c++) {
                board[r][c] = board[r][c] + (isAttack ? -1 * degree : degree) 
            }
        }
    })
    
    return board.reduce((acc, cur) => {
        return acc + cur.reduce((rowCount, cur) => {
            return cur > 0 ? rowCount + 1 : rowCount
        }, 0)
    }, 0)
}
```

## 2차

- 누적ㅎ바

```js
function solution(board, skills) {
    const N = board.length
    const M = board[0].length
    
    // 누적합 (범위 + 1)
    
    const prefixSum = Array.from({ length: N + 1 }, () => Array(M + 1).fill(0))
    
    skills.forEach(skill => {
        const [type, r1, c1, r2, c2, degree] = skill
        const d = type === 1 ? -degree : degree

        prefixSum[r1][c1] += d;
        prefixSum[r1][c2 + 1] -= d;
        prefixSum[r2 + 1][c1] -= d;
        prefixSum[r2 + 1][c2 + 1] += d;
        
    })
    
    // 좌 - 우
    for (let r = 0; r < N; r++) {
        for (let c = 1; c < M; c++) {
            prefixSum[r][c] += prefixSum[r][c - 1]
        }
    }
    
    // 상 - 하
    for (let c = 0; c < M; c++) {
        for (let r = 1; r < N; r++) {
            prefixSum[r][c] += prefixSum[r - 1][c]
        }
    }
    
    let answer = 0;
    
    for (let r = 0; r < N; r++) {
        for (let c = 0; c < M; c++) {
            if (board[r][c] + prefixSum[r][c] > 0) {
                answer++
            }
        }
    }

    return answer
}
```